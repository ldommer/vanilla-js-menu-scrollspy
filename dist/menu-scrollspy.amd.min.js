define((function(){"use strict";function t(){return t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},t.apply(this,arguments)}var e=function(t){this.settings=this.getSettings(t),this.init()};return e.prototype={getSettings:function(e){return t({},{classActive:"active",classMenuItem:"menu-item",classSelector:"js-menu-scrollspy",customEvents:[],enterViewportThreshold:"middle",fixedMenuSelector:null,reInitOnScroll:!1,updateUrlFragmentOnScroll:!0},e)},init:function(){var t=this;this.sections=this.getSections(),this.location=this.getLocation(),this.windowHeight=window.innerHeight,this.run(),this.setEventListener("scroll"),this.setEventListener("resize"),this.settings.customEvents&&this.settings.customEvents.forEach((function(e,s){t.setEventListener(e)}))},getSections:function(){for(var t={},e=0,s=document.getElementsByClassName(this.settings.classSelector);e<s.length;e++){var n=s[e];t[n.id]={top:n.offsetTop,bottom:n.offsetTop+n.offsetHeight}}return t},getLocation:function(){var t=window.location.pathname,e=window.location.origin;return"/"!==t&&(e+=t),e},run:function(){var t,e=this.getEnterViewportThreshold(),s=window.pageYOffset;for(t in this.sections){var n=void 0;n=t.includes("http")?'href="'.concat(this.location,"#").concat(t,'"'):'href*="'.concat(t,'"');var i=document.querySelector(".".concat(this.settings.classMenuItem,".").concat(this.settings.classActive)),o=document.querySelector(".".concat(this.settings.classMenuItem,"[").concat(n,"]"));this.sections[t].top-e<=s&&this.sections[t].bottom-e>=s?i!==o&&(null!==i&&i.classList.remove(this.settings.classActive),o.classList.add(this.settings.classActive),this.settings.updateUrlFragmentOnScroll&&history.replaceState(null,null,"".concat(this.location,"#").concat(t))):i===o&&(o.classList.remove(this.settings.classActive),this.settings.updateUrlFragmentOnScroll&&history.replaceState(null,null,this.location))}},getEnterViewportThreshold:function(){switch(this.settings.enterViewportThreshold){case"top":return this.settings.fixedMenuSelector?document.querySelector(this.settings.fixedMenuSelector).offsetHeight:0;case"middle":return this.windowHeight/2;case"bottom":return this.windowHeight}},setEventListener:function(t){var e=this;window.addEventListener(t,(function(s){("scroll"!==t||"scroll"===t&&e.settings.reInitOnScroll)&&(e.sections=e.getSections(),e.windowHeight=window.innerHeight),e.run()}),{passive:!0})}},e}));
