const t=function(t){this.settings=this.getSettings(t),this.init()};t.prototype={getSettings:function(t){return Object.assign({},{classActive:"active",classMenuItem:"menu-item",classSelector:"js-menu-scrollspy",customEvents:[],enterViewportThreshold:"middle",fixedMenuSelector:null,reInitOnScroll:!1,updateUrlFragmentOnScroll:!0},t)},init:function(){this.sections=this.getSections(),this.location=this.getLocation(),this.windowHeight=window.innerHeight,this.run(),this.setEventListener("scroll"),this.setEventListener("resize"),this.settings.customEvents&&this.settings.customEvents.forEach(((t,e)=>{this.setEventListener(t)}))},getSections:function(){let t={};for(let e of document.getElementsByClassName(this.settings.classSelector))t[e.id]={top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};return t},getLocation:function(){const t=window.location.pathname;let e=window.location.origin;return"/"!==t&&(e+=t),e},run:function(){let t;const e=this.getEnterViewportThreshold(),s=window.pageYOffset;for(t in this.sections){let i;i=t.includes("http")?`href="${this.location}#${t}"`:`href*="${t}"`;const n=document.querySelector(`.${this.settings.classMenuItem}.${this.settings.classActive}`),o=document.querySelector(`.${this.settings.classMenuItem}[${i}]`);this.sections[t].top-e<=s&&this.sections[t].bottom-e>=s?n!==o&&(null!==n&&n.classList.remove(this.settings.classActive),o.classList.add(this.settings.classActive),this.settings.updateUrlFragmentOnScroll&&history.replaceState(null,null,`${this.location}#${t}`)):n===o&&(o.classList.remove(this.settings.classActive),this.settings.updateUrlFragmentOnScroll&&history.replaceState(null,null,this.location))}},getEnterViewportThreshold:function(){switch(this.settings.enterViewportThreshold){case"top":return this.settings.fixedMenuSelector?document.querySelector(this.settings.fixedMenuSelector).offsetHeight:0;case"middle":return this.windowHeight/2;case"bottom":return this.windowHeight}},setEventListener:function(t){window.addEventListener(t,(e=>{("scroll"!==t||"scroll"===t&&this.settings.reInitOnScroll)&&(this.sections=this.getSections(),this.windowHeight=window.innerHeight),this.run()}),{passive:!0})}};export{t as default};
